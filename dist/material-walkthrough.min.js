!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.MaterialWalkthrough=n()}(this,function(){"use strict";function e(e,n){for(var t,r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];(o[e]||o.ALL)&&(t=console).log.apply(t,[e+": "+n].concat(i))}!function(){function e(e){this.value=e}function n(n){function t(r,i){try{var a=n[r](i),l=a.value;l instanceof e?Promise.resolve(l.value).then(function(e){t("next",e)},function(e){t("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,n){switch(e){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?t(r.key,r.arg):i=null}var r,i;this._invoke=function(e,n){return new Promise(function(o,a){var l={key:e,arg:n,resolve:o,reject:a,next:null};i?i=i.next=l:(r=i=l,t(e,n))})},"function"!=typeof n.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)}}();var n=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),o={MSG:!0,WALK_CONTENT:!0,WALK_CONTENT_TOP:!0,WALK_LOCK:!0,WALK_SCROLL:!0,ALL:!0},r={get:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e},setStyle:function(e,n){Object.keys(n).forEach(function(t){e.style[t]=n[t]})},appendTo:function(e,n){e.innerHTML+=n},removeClass:function(e,n){e.classList.remove(n)},addClass:function(e,n){e.classList.add(n)}},i={keys:{37:1,38:1,39:1,40:1,32:1,33:1,34:1},preventDefault:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1},preventDefaultForScrollKeys:function(e){if(i.keys[e.keyCode])return i.preventDefault(e),!1},disable:function(){r.setStyle(r.get("html"),{height:"100vh",overflow:"hidden"});var e=i.preventDefault,n=i.preventDefaultForScrollKeys;window.addEventListener&&window.addEventListener("DOMMouseScroll",e,!1),window.onwheel=e,window.onmousewheel=document.onmousewheel=e,window.ontouchmove=e,document.onkeydown=n},enable:function(){r.setStyle(r.get("html"),{height:"",overflow:"auto"}),window.removeEventListener&&window.removeEventListener("DOMMouseScroll",i.preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}},a=function(){function o(){n(this,o)}return t(o,null,[{key:"_init",value:function(){r.appendTo(r.get("body"),o.ELEMENT_TEMPLATE),o._wrapper=r.get("#walk-wrapper"),o._contentWrapper=r.get("#walk-content-wrapper"),o._content=r.get("#walk-content"),o._actionButton=r.get("#walk-action"),o.isInitialized=!0}},{key:"_setWalker",value:function(n){var t=r.get(n.target);e("MSG","-------------------------------------"),e("MSG","Setting a walk to #"+t.id),e("WALK_SETUP","Properties:\n"+JSON.stringify(n,null,2)),o._setupListeners(t,n.onClose),r.setStyle(o._contentWrapper,{display:"none"}),o._locateTarget(t,function(){o._setProperties(n.content,n.color,n.acceptText),r.setStyle(o._wrapper,{display:"block"}),o._renderFrame(t,function(){r.addClass(o._wrapper,"opened"),o._renderContent(t,function(){r.setStyle(o._contentWrapper,{display:"block"})})})}),e("MSG","Walk created. Calling onSet() (if exists)"),n.onSet&&n.onSet()}},{key:"_createUpdateHandler",value:function(n){e("WALK_UPDATE","Creating UpdateHandler for #"+n.id);var t=function(){e("MSG","Updating and rendering"),o._locateTarget(n,function(){o._renderFrame(n,function(){o._renderContent(n)})})};return t.toString=function(){return"updateHandler -> #"+n.id},t}},{key:"_setupListeners",value:function(e,n){o._instance.updateHandler&&o._flushListeners(),o._instance.updateHandler=o._createUpdateHandler(e),window.addEventListener("resize",o._instance.updateHandler),o._instance.mutationObserver=new MutationObserver(o._instance.updateHandler),o._actionButton.addEventListener("click",function e(){n&&n(),o._instance.points&&o._instance.points[o._instance.currentIndex+1]?(o._instance.currentIndex++,o._setWalker(o._instance.points[o._instance.currentIndex].target,o._instance.points[o._instance.currentIndex])):(o._instance.currentIndex=0,o._instance.points=null,o._instance.onCloseCallback&&o._instance.onCloseCallback(),o._instance.onCloseCallback=null,o.closeWalker()),o._actionButton.removeEventListener("click",e)})}},{key:"_flushListeners",value:function(){e("WALK_UPDATER","Flushing handlers\n"+o._instance.updateHandler),o._instance.mutationObserver&&o._instance.mutationObserver.disconnect(),o._instance.mutationObserver=null,window.removeEventListener("resize",o._instance.updateHandler)}},{key:"_setProperties",value:function(e,n,t){r.setStyle(o._wrapper,{borderColor:n=n||o.DEFAULT_COLOR}),o._content.innerHTML=e,o._actionButton.innerHTML=t}},{key:"_locateTarget",value:function(n,t){var o=n.offsetTop,r=o-window.innerHeight/2;e("WALK_LOCK","Moving Scroll to:",o),setTimeout(function(){window.scrollTo(0,r)},500),t&&t()}},{key:"_renderFrame",value:function(n,t){var i={top:n.offsetTop,left:n.offsetLeft},a=n.getClientRects()[0],l=a.height,s=a.width,u=l>s?l:s;u<o.MIN_SIZE&&(u=o.MIN_SIZE),e("WALK_LOCK","Walk hole size "+u+"px"),r.setStyle(o._wrapper,{height:u+o.GUTTER+"px",width:u+o.GUTTER+"px",marginLeft:-(u+o.GUTTER)/2+"px",marginTop:-(u+o.GUTTER)/2+"px",left:i.left+s/2+"px",top:i.top+l/2+"px"}),setTimeout(function(){t()},o.TRANSITION_DURATION/2)}},{key:"_renderContent",value:function(n,t){var i=n.getBoundingClientRect(),a=i.left+(o._wrapper.offsetWidth-o.GUTTER)+o._contentWrapper.offsetWidth<window.innerWidth,l=i.left-o.GUTTER-o._contentWrapper.offsetWidth>0,s=o._wrapper.getBoundingClientRect().top-o._contentWrapper.offsetHeight>0,u=o._wrapper.getBoundingClientRect().top+o._contentWrapper.offsetHeight+o._contentWrapper.offsetHeight<window.innerHeight;e("WALK_CONTENT","itCanBeRenderedInRight: "+a),e("WALK_CONTENT","itCanBeRenderedInLeft: "+l),e("WALK_CONTENT","itCanBeRenderedInTop: "+s),e("WALK_CONTENT","itCanBeRenderedInBottom: "+u);var c="100%",p="100%",d=0,f=0,_="left";a||(c=l?"-"+o._contentWrapper.offsetWidth+"px":u?"0%":"25%",_=l?"right":"center",d=l?0:u?"20px":"-20px"),u||(p=s?"-"+o._contentWrapper.offsetHeight+"px":o._wrapper.offsetHeight/2-o._contentWrapper.offsetHeight/2+"px",f=s?0:a?"20px":"-20px"),r.setStyle(o._contentWrapper,{left:c,top:p,textAlign:_,marginTop:d,marginLeft:f}),t&&t()}},{key:"walk",value:function(e,n){o._instance.points=e,o._instance.currentIndex=0,o._instance.onCloseCallback=n,o.to(e[0])}},{key:"to",value:function(e){i.disable(),o.isInitialized||o._init(),r.removeClass(o._wrapper,"closed"),o._setWalker(e)}},{key:"closeWalker",value:function(){e("MSG","Closing Walker"),o._flushListeners(),i.enable(),r.setStyle(o._wrapper,{marginTop:"-500px",marginLeft:"-500px"}),r.addClass(o._wrapper,"closed"),setTimeout(function(){r.setStyle(o._wrapper,{display:"none"}),r.removeClass(o._wrapper,"opened"),e("MSG","Walker Closed!")},o.TRANSITION_DURATION)}}]),o}();return a.DEFAULT_COLOR="#2196F3",a.TRANSITION_DURATION=500,a.MIN_SIZE=60,a.GUTTER=20,a.ELEMENT_TEMPLATE="<div id='walk-wrapper'>\n            <div id='walk-content-wrapper'>\n                <div id='walk-content'></div>\n                <button id='walk-action'></button>\n            </div>\n        </div>",a.isInitialized=!1,a._wrapper=null,a._contentWrapper=null,a._content=null,a._actionButton=null,a._instance={updateHandler:null,mutationObserver:null,points:null,currentIndex:null,onCloseCallback:null},a});
